- stamp_master_ids = user.stamps.pluck(:master_id)
.stamps.js-stamps
  .stamps__user-name
    = user.name
  .stamps__stamp-count
    #{user.stamps.count} / #{User.master_names.size} 個
  .stamps__stamp-table
    - User.master.each do |master|
      .stamps__frame-wrapper
        .stamps__master-name{title: master.name}
          = master.name
        .stamps__frame{class: master == current_user ? 'is-mine' : ''}
          - if stamp_master_ids.include?(master.id)
            .stamps__stamp-wrapper
              = fa_icon 'smile-o 5x', class: 'stamps__stamp'
            - if master == current_user
              .stamps__stamp-wrapper
                = link_to [user, current_user.sent_stamps.find_by(user: user)], method: :delete, remote: true, data: {confirm: 'スタンプを削除してもいいですか？'}, class: 'stamps__destroy-link' do
                  = fa_icon 'trash 5x', class: 'stamps__destroy'
          - elsif master == current_user
            .stamps__stamp-wrapper
              = link_to user_stamps_path(user), method: :post, remote: true, class: 'stamps__link' do
                = fa_icon 'smile-o 5x', class: 'stamps__placeholder'
    - (User.master_names.size - User.master.count).times.each do
      .stamps__frame-wrapper
        .stamps__master-name
          Unknown
        .stamps__frame
